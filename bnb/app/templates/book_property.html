<!DOCTYPE html>
<html>
<head>
    <title>Book {{ property.title }}</title>
    <style>
        .flash-messages { 
    margin: 10px auto; 
    max-width: 800px; 
    position: relative;
}

.flash { 
    padding: 10px 35px 10px 10px; 
    margin-bottom: 8px; 
    border-radius: 5px; 
    position: relative; 
    animation: fadeOut 0s ease-in 3s forwards;
}

.flash-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
.flash-danger  { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
.flash-warning { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
.flash-info    { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }

.flash .close {
    position: absolute;
    right: 10px;
    top: 5px;
    text-decoration: none;
    font-size: 18px;
    color: inherit;
    cursor: pointer;
}

.flash .close:hover {
    color: black;
}

@keyframes fadeOut {
    to { opacity: 0; visibility: hidden; }
}
        .price-summary {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .price-row {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
        .total-price {
            font-weight: bold;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            margin-top: 10px;
        }
        .form-control {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .btn-primary, .btn-home {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            color: white;
        }
        .btn-primary { background-color: #007bff; }
        .btn-primary:hover { background-color: #0056b3; }
        .btn-home { background-color: #6c757d; margin-left: 10px; }
        .btn-home:hover { background-color: #5a6268; }
        .error { color: red; font-size: 0.9em; }
    </style>
</head>
<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
        <div class="flash flash-{{ category }}">
          {{ message }}
          <a href="#" class="close">&times;</a>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<div class="container">
    <h2>Book {{ property.title }}</h2>
    
    <div class="property-info">
        <p>{{ property.area or 'N/A' }}, {{ property.city or 'N/A' }}</p>
        <p>Hosted by {{ property.host.username }}</p>
    </div>

    <form method="POST" id="booking-form" action="{{ url_for('booking.book_property', property_id=property.id) }}">
        {{ form.hidden_tag() }}
        
        <div class="form-group">
            {{ form.check_in.label }}
            {{ form.check_in(class="form-control") }}
            {% if form.check_in.errors %}
                <div class="error">{{ form.check_in.errors[0] }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.check_out.label }}
            {{ form.check_out(class="form-control") }}
            {% if form.check_out.errors %}
                <div class="error">{{ form.check_out.errors[0] }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.guests.label }}
            {{ form.guests(class="form-control") }}
            {% if form.guests.errors %}
                <div class="error">{{ form.guests.errors[0] }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.notes.label }}
            {{ form.notes(class="form-control", rows=3) }}
        </div>

        <div>
            {{ form.submit(class="btn btn-primary") }}
            <a href="{{ url_for('auth.home') }}" class="btn-home">Back to Home</a>
        </div>
    </form>
</div>
</body>
</html>
